<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Virtual Labs</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  </head>
  <body>
    <!-- sidebar and body -->
    <div class="flex min-h-[80vh]">
      <div class="px-6 pb-6 flex-1">
        <div class="flex flex-shrink-0">
          <div class="relative w-[700px] py-2">
            <div
              class="absolute bg-[#ff0000] h-2 w-[450px] rounded-md top-1 right-0"
            >
              <p class="font-medium flex justify-end mt-1">CH1-A</p>
            </div>
            <div
              class="absolute bg-[#ff0000] h-[440px] w-2 rounded-md top-1 left-[250px]"
            ></div>
            <div
              class="z-10 absolute bg-[#ff0000] h-2 w-[90px] rounded-md top-[240px] left-[164px]"
            ></div>
            <div
              class="z-10 absolute bg-[#ff0000] h-2 w-[100px] rounded-md top-[436px] left-[250px]"
            ></div>
            <div
              class="z-10 absolute bg-[#0000ff] h-2 w-[56px] rounded-md top-[393px] left-[214px]"
            ></div>
            <div
              class="absolute bg-[#ff0000] h-[440px] w-2 rounded-md top-1 left-[250px]"
            ></div>
            <div
              class="z-10 absolute bg-[#0000ff] h-2 w-[56px] rounded-md top-[232px] left-[262px]"
            ></div>
            <div
              class="absolute bg-[#0000ff] h-[310px] w-2 rounded-md top-[234px] left-[262px]"
            ></div>
            <div
              class="z-10 absolute bg-[#0000ff] h-2 w-[94px] rounded-md top-[537px] left-[262px]"
            ></div>
            <!--  -->
            <div
              class="z-10 absolute bg-[#0000ff] h-2 w-[70px] rounded-md top-[537px] left-[414px]"
            ></div>
            <div
              class="absolute bg-[#0000ff] h-[312px] w-2 rounded-md top-[232px] left-[476px]"
            ></div>
            <div
              class="z-10 absolute bg-[#0000ff] h-2 w-[74px] rounded-md top-[231px] left-[476px]"
            ></div>
            <div
              class="z-10 absolute bg-[#000000] h-2 w-[96px] rounded-md top-[231px] right-[-6px]"
            >
              <p class="font-medium flex justify-end mt-1">CH2-A</p>
            </div>
            <!--  -->
            <div
              class="absolute bg-[#ffff00] h-[108px] w-2 rounded-md top-[130px] left-[440px]"
            ></div>
            <div
              class="z-10 absolute bg-[#ffff00] h-2 w-[74px] rounded-md top-[231px] left-[374px]"
            ></div>
            <div
              class="z-10 absolute bg-[#ffff00] h-2 w-[106px] rounded-md top-[128px] left-[440px]"
            ></div>

            <div class="flex justify-around p-8 gap-16">
              <!-- audio oscillator -->
              <div
                class="relative bg-[#a9a9a9] p-1 pt-0 border-4 shadow-[5px_5px_5px_5px_rgba(0,0,0,0.6)] border-black w-[140px] h-[250px]"
              >
                <h5 class="text-center text-sm font-medium">
                  AUDIO OSCILLATOR
                </h5>
                <div class="flex justify-around py-1">
                  <div class="flex flex-col items-center">
                    <div
                      class="h-[24px] w-[24px] flex justify-center border-[5px] border-[#ffff00] items-center bg-black rounded-full"
                    >
                    </div>
                    <p class="text-[12px] font-medium">SYNC</p>
                  </div>
                  <div class="flex flex-col items-center">
                    <div
                      class="h-[24px] w-[24px] flex justify-center items-center border-[5px] border-[#ffff00] bg-black rounded-full"
                    >
                    </div>
                    <p class="text-[12px] font-medium">cos(wt)</p>
                  </div>
                </div>
                <div class="flex flex-col items-center">
                  <p class="text-[13px] pb-1 text-center font-semibold">
                    Message Frequency
                  </p>
                  <input
                    id="messageFrequency"
                    value="1"
                    type="range"
                    min="1"
                    max="1000"
                    onchange="handleMessageFrequencyChange()"
                  />
                  <div class="leading-none font-medium messageFrequencyDiv">
                    1
                  </div>
                </div>
                <div class="flex flex-col items-end">
                  <div class="flex flex-col items-end">
                    <div
                      class="h-[24px] w-[24px] flex justify-center items-center bg-[#ff0000] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                    <p class="text-[12px] font-medium">TTL</p>
                  </div>
                  <div class="flex flex-col items-end">
                    <div
                      class="h-[24px] w-[24px] flex justify-center border-[5px] border-[#ffff00] items-center bg-black rounded-full"
                    >
                    </div>
                    <p class="text-[12px] font-medium">sin(Î¼t)</p>
                  </div>
                </div>
                <div class="flex justify-center mt-6">
                  <button
                    onclick="generateMessage()"
                    class="bg-[#008000] py-[3px] px-3 rounded-md hover:bg-[#0c9c0c] hover:scale-105"
                  >
                    Generate
                  </button>
                </div>
              </div>
              <!-- phase shifter -->
              <div
                class="relative bg-[#a9a9a9] p-1 pt-0 border-4 shadow-[5px_5px_5px_5px_rgba(0,0,0,0.6)] border-black w-[140px] h-[250px]"
              >
                <h5 class="text-center text-sm font-medium">PHASE SHIFTER</h5>
                <!--  -->
                <div class="flex flex-col items-center mb-14 mt-5">
                  <div class="flex flex-col items-start">
                    <div
                      class="h-[24px] w-[24px] flex justify-center items-center bg-[#ff0000] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                    <p class="text-[12px] font-medium">DC</p>
                  </div>
                  <div class="flex flex-col items-start">
                    <div
                      class="h-[24px] w-[24px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                    <p class="text-[12px] font-medium">GND</p>
                  </div>
                </div>
                <div class="flex justify-around">
                  <div class="flex flex-col items-center">
                    <div
                      class="h-[24px] w-[24px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                    <p class="text-[12px] font-medium">B</p>
                  </div>
                  <div class="flex flex-col items-center">
                    <div
                      class="h-[24px] w-[24px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                    <p class="text-[12px] font-medium">GA+gB</p>
                  </div>
                </div>
              </div>
              <!-- adder -->
              <div
                class="relative bg-[#a9a9a9] p-1 pt-0 border-4 shadow-[5px_5px_5px_5px_rgba(0,0,0,0.6)] border-black w-[140px] h-[250px]"
              >
                <h5 class="text-center text-sm font-medium">ADDER</h5>
                <div class="flex flex-col items-center">
                  <p class="text-[13px] pb-1 text-center font-semibold">G:</p>
                  <input
                    id="A"
                    value="1"
                    type="range"
                    min="0"
                    max="2"
                    step="0.01"
                  />
                  <div class="leading-none ADiv">1</div>
                </div>
                <!--  -->
                <div class="flex flex-col pl-3">
                  <div
                    class="h-[24px] w-[24px] relative flex justify-center items-center bg-[#ffff00] rounded-full"
                  >
                    <div class="h-[14px] w-[14px] bg-[#000] rounded-full"></div>
                  </div>
                  <p>A</p>
                </div>
                <!--  -->
                <div class="flex flex-col items-center">
                  <p class="text-[13px] pb-1 text-center font-semibold">g:</p>
                  <input
                    type="range"
                    value="1"
                    id="B"
                    min="0"
                    max="2"
                    step="0.01"
                  />
                  <div class="leading-none BDiv">1</div>
                </div>
                <div class="flex justify-around">
                  <div class="flex flex-col items-center">
                    <div
                      class="h-[24px] w-[24px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                    <p class="text-[12px] font-medium">B</p>
                  </div>
                  <div class="flex flex-col items-center">
                    <div
                      class="h-[24px] w-[24px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                    <p class="text-[12px] font-medium">GA+gB</p>
                  </div>
                </div>
                <!--  -->
              </div>
            </div>
            <div class="flex ml-24 mt-6 mb-8 gap-20">
              <!-- master signal -->
              <div
                class="relative bg-[#a9a9a9] p-1 pt-0 border-4 shadow-[5px_5px_5px_5px_rgba(0,0,0,0.6)] border-black w-[140px] h-[250px]"
              >
                <h5 class="text-center text-sm font-medium">Master Signals</h5>
                <div
                  class="absolute top-[90px] flex flex-col items-center gap-y-1"
                >
                  <p class="text-[13px] pb-1 font-bold">Carrier Frequency:</p>
                  <input
                    id="carrierFrequency"
                    value="10"
                    type="range"
                    min="1"
                    max="10000"
                    onchange="handleCarrierFrequencyChange()"
                  />
                  <div class="leading-none font-medium carrierFrequencyDiv">
                    10
                  </div>
                </div>
                <div class="flex flex-col gap-4 mt-4 items-end">
                  <div class="flex items-center gap-1">
                    <p class="text-[12px] font-medium">100KHz sin</p>
                    <div
                      class="h-[22px] w-[22px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                  </div>
                  <div class="flex items-center gap-1">
                    <p class="text-[12px] font-medium">100KHz cos</p>
                    <div
                      class="h-[22px] w-[22px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                  </div>
                  <div class="flex items-center gap-1">
                    <p class="text-[12px] font-medium">100KHz TTL</p>
                    <div
                      class="h-[22px] w-[22px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                  </div>
                  <div class="flex items-center gap-1">
                    <p class="text-[12px] font-medium">sample TTL</p>
                    <div
                      class="h-[22px] w-[22px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                  </div>
                  <div class="flex items-center gap-1">
                    <p class="text-[12px] font-medium">message sin</p>
                    <div
                      class="h-[22px] w-[22px] flex justify-center items-center bg-[#ffff00] rounded-full"
                    >
                      <div
                        class="h-[14px] w-[14px] bg-[#000] rounded-full"
                      ></div>
                    </div>
                  </div>
                </div>

                <div class="flex justify-center mt-12">
                  <button
                    onclick="generateCarrier()"
                    class="bg-[#008000] py-[3px] px-3 rounded-md hover:bg-[#0c9c0c] hover:scale-105"
                  >
                    Generate
                  </button>
                </div>
              </div>
              <!-- multiplier -->
              <div
                class="relative bg-[#a9a9a9] p-1 pt-0 border-4 shadow-[5px_5px_5px_5px_rgba(0,0,0,0.6)] border-black w-[140px] h-[250px]"
              >
                <h5 class="text-center text-sm font-medium">Multiplier</h5>
                <div class="flex flex-col pl-3 pt-[58px] pb-[53px]">
                  <div
                    class="h-[24px] w-[24px] relative flex justify-center items-center bg-[#ffff00] rounded-full"
                  >
                    <div class="h-[14px] w-[14px] bg-[#000] rounded-full"></div>
                  </div>
                  <p>X</p>
                </div>
                <div class="flex justify-around">
                  <div
                    class="h-[24px] w-[24px] flex justify-center items-center bg-[#ffff00] rounded-full"
                  >
                    <div class="h-[14px] w-[14px] bg-[#000] rounded-full"></div>
                  </div>
                  <div
                    class="h-[24px] w-[24px] flex justify-center items-center bg-[#ffff00] rounded-full"
                  >
                    <div class="h-[14px] w-[14px] bg-[#000] rounded-full"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex flex-col grow-0 items-center">
            <div class="w-full pl-2 my-3">
              <div class="flex flex-col gap-2 m-2">
                <div class="flex flex-1 gap-1 items-center">
                  <p class="text-nowrap font-medium">Sampling frequency :</p>
                  <input
                    class="border px-1 w-[152px] py-1 rounded-sm border-black"
                    min="1"
                    type="number"
                    id="samplingFrequency"
                    value="1000"
                    placeholder="sampling frequency in Hz"
                  />
                </div>
                <div class="flex flex-1 items-center gap-1">
                  <p class="font-medium">Phase Deviation:(pi*(</p>
                  <input
                    class="border px-1 w-[152px] py-1 rounded-sm border-black"
                    type="number"
                    id="phaseDeviation"
                    value="0.5"
                  />
                  )
                  <button
                    class="bg-blue-500 hover:scale-105 ml-1 text-white rounded-md px-2 py-1"
                    onclick="createPlots()"
                  >
                    Generate
                  </button>
                </div>
              </div>
            </div>
            <div class="bg-red-100 plotSection">
              <div id="modulatedPlot" class="w-[600px] max-h-[500px]"></div>
              <div id="carrierPlot" class="w-[600px] max-h-[500px]"></div>
              <div id="messagePlot" class="w-[600px] max-h-[500px]"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function handleMessageFrequencyChange() {
        const messageValue = parseFloat(
          document.getElementById("messageFrequency").value
        );
        document.querySelector(".messageFrequencyDiv").innerHTML = messageValue;
      }
      function handleCarrierFrequencyChange() {
        const messageValue = parseFloat(
          document.getElementById("carrierFrequency").value
        );
        document.querySelector(".carrierFrequencyDiv").innerHTML = messageValue;
      }
      // Function for phase modulation
      function pmmod(
        message_frequency,
        carrier_frequency,
        sampling_frequency,
        phase_deviation
      ) {
        const Fs = sampling_frequency;
        const phasedev = phase_deviation;
        const x_values = Array.from(
          { length: Math.floor(1 * Fs) },
          (_, i) => i / Fs
        );

        // Message signal
        const message_signal = x_values.map((t) =>
          Math.cos(2 * Math.PI * message_frequency * t)
        );

        // Carrier signal
        const carrier_signal = x_values.map((t) =>
          Math.cos(2 * Math.PI * carrier_frequency * t)
        );

        // Phase modulation
        const modulated_signal = x_values.map((t) =>
          Math.cos(
            2 * Math.PI * carrier_frequency * t +
              phasedev * message_signal[Math.floor(t * Fs)]
          )
        );

        return {
          x: x_values,
          message: message_signal,
          carrier: carrier_signal,
          modulated: modulated_signal,
        };
      }

      // Function to generate message signal
      function generateMessage() {
        var message_frequency = parseInt(
          document.getElementById("messageFrequency").value
        );
        var sampling_frequency = parseInt(
          document.getElementById("samplingFrequency").value
        );
        var x_values = Array.from(
          { length: Math.floor(1 * sampling_frequency) },
          (_, i) => i / sampling_frequency
        );
        var message_signal = x_values.map((t) =>
          Math.cos(2 * Math.PI * message_frequency * t)
        );

        var messagePlotDiv = document.getElementById("messagePlot");
        Plotly.newPlot(
          messagePlotDiv,
          [
            {
              x: x_values,
              y: message_signal,
              mode: "lines",
              name: "Message Signal",
              line: { color: "green" },
            },
          ],
          {
            title: "Message Signal",
            xaxis: {
              title: "Time",
            },
            yaxis: {
              title: "Amplitude",
            },
          }
        );
      }

      // Function to generate carrier signal
      function generateCarrier() {
        var carrier_frequency = parseInt(
          document.getElementById("carrierFrequency").value
        );
        var sampling_frequency = parseInt(
          document.getElementById("samplingFrequency").value
        );
        var x_values = Array.from(
          { length: Math.floor(1 * sampling_frequency) },
          (_, i) => i / sampling_frequency
        );
        var carrier_signal = x_values.map((t) =>
          Math.cos(2 * Math.PI * carrier_frequency * t)
        );

        var carrierPlotDiv = document.getElementById("carrierPlot");
        Plotly.newPlot(
          carrierPlotDiv,
          [
            {
              x: x_values,
              y: carrier_signal,
              mode: "lines",
              name: "Carrier Signal",
              line: { color: "red" },
            },
          ],
          {
            title: "Carrier Signal",
            xaxis: {
              title: "Time",
            },
            yaxis: {
              title: "Amplitude",
            },
          }
        );
      }

      // Function to create plots
      function createPlots() {
        var message_frequency = parseInt(
          document.getElementById("messageFrequency").value
        );
        var carrier_frequency = parseInt(
          document.getElementById("carrierFrequency").value
        );
        var sampling_frequency = parseInt(
          document.getElementById("samplingFrequency").value
        );
        var phase_deviation =
          Math.PI * parseFloat(document.getElementById("phaseDeviation").value);
        var data = pmmod(
          message_frequency,
          carrier_frequency,
          sampling_frequency,
          phase_deviation
        );

        // Plot message signal
        var messagePlotDiv = document.getElementById("messagePlot");
        Plotly.newPlot(
          messagePlotDiv,
          [
            {
              x: data.x,
              y: data.message,
              mode: "lines",
              name: "Message Signal",
              line: { color: "green" },
            },
          ],
          {
            title: "Message Signal",
            xaxis: {
              title: "Time",
            },
            yaxis: {
              title: "Amplitude",
            },
          }
        );

        // Plot carrier signal
        var carrierPlotDiv = document.getElementById("carrierPlot");
        Plotly.newPlot(
          carrierPlotDiv,
          [
            {
              x: data.x,
              y: data.carrier,
              mode: "lines",
              name: "Carrier Signal",
              line: { color: "red" },
            },
          ],
          {
            title: "Carrier Signal",
            xaxis: {
              title: "Time",
            },
            yaxis: {
              title: "Amplitude",
            },
          }
        );

        // Plot phase-modulated signal
        var modulatedPlotDiv = document.getElementById("modulatedPlot");
        Plotly.newPlot(
          modulatedPlotDiv,
          [
            {
              x: data.x,
              y: data.modulated,
              mode: "lines",
              name: "Phase Modulated Signal",
              line: { color: "blue" },
            },
          ],
          {
            title: "Phase Modulated Signal",
            xaxis: {
              title: "Time",
            },
            yaxis: {
              title: "Amplitude",
            },
          }
        );
      }
    </script>
  </body>
</html>
